<!--pages/home/home.wxml-->

<view class="weui-tab">

  <scroll-view scroll-x="true" class="weui-navbar" scroll-left="{{scrollLeft}}">
    <block wx:for-items="{{tabDataSource}}" wx:key="id" wx:index="index">
      <view id="{{index}}" class="weui-navbar__item {{activeIndex == index ?'weui-bar__item_on':''}}" bindtap="switchNav" style="width:{{tabW}}px">
        <view class="weui-navbar__title"> {{item.title}}</view>
      </view>
    </block>
    <view class="weui-navbar__slider" style="width:{{tabW}}px;transform:translateX({{slideOffset}}px);"></view>
  </scroll-view>

  <swiper current="{{activeIndex}}" class="swiper-box " duration="200" bindchange="switchTab" style="height: {{clientHeight}}px">
    <swiper-item class="swiper-item" wx:for-items="{{tabDataSource}}" wx:for-item='tabitem' wx:key="id" wx:index="index">
      <scroll-view scroll-y="true" class="scoll-h" style="height: {{clientHeight}}px" bindscroll="onPageScroll">

        <!-- 教程 -->
        <block wx:if="{{tabitem.slotname=='slot1'}}">
          <swiper indicator-dots='true' autoplay='true'>
            <swiper-item wx:for="{{[1,2,3,4]}}">
              <image src="https://chellel.github.io/myblog/skateboard/image%20({{item}}).jpg" style="width:100%;" mode="aspectFill" lazy-load="true">
              </image>
            </swiper-item>
          </swiper>

          <view class="weui-panel">
            <view class="weui-panel__bd">
              <view class="weui-media-box weui-media-box_text">
                <view class="weui-media-box__title">{{topicInfo.name}}</view>
                <view class="weui-media-box__info">
                  <view class="weui-media-box__info__meta">关注者</view>
                  <view class="weui-media-box__info__meta">{{topicInfo.followers_count}}</view>
                  <view class="weui-media-box__info__meta weui-media-box__info__meta_extra">问题数</view>
                  <view class="weui-media-box__info__meta">{{topicInfo.questions_count}}</view>
                </view>
                <view class="weui-media-box__desc" style='display:{{readMore?"block":"-webkit-box"}};'>{{topicInfo.introduction}}</view>
              </view>
            </view>



            <view class="weui-panel__ft" bindtap='readMore'>
              <view class="weui-cell weui-cell_access weui-cell_readmore">
                <view class="weui-cell__ft">{{readMore?'收起 ':'查看全部'}}
                <icon class='icon iconfont icon-Up'></icon>
                </view>
              </view>
            </view>
          </view>
        </block>
        <!-- 动作 -->
        <block wx:elif="{{tabitem.slotname=='slot2'}}">
          <view class="weui-panel weui-panel_access">
      
            <view class="weui-panel__bd">
              <view class="weui-media-box weui-media-box_text" wx:for="{{trickDataSource}}" wx:for-item="item" wx:for-index="index" data-index="{{index}}" bindtap="onTrickClick">
              <view class='weui-panel-hd'>
                <view class="weui-media-box__title">{{item.trick}}</view>
                <view class="weui-media-box_tip">

                  <icon class="icon iconfont icon-eye"></icon>
                  <view class="page-tip-text">
                    浏览：1
                  </view>
                </view></view>
                <view class="weui-media-box__desc">{{item.description}}</view>
              </view>

            </view>

          </view>

          <image src="http://img3.doubanio.com/view/note/raw/public/p49861582.jpg" />
          <view>


          </view>
        </block>

        <!-- 其他 -->
        <block wx:else>
          <view class='img-content col-md-4 col-xs-6' wx:for-items="{{imageDataSource}}" wx:for-item="item">
            <image class="data-echo" src="https://chellel.github.io/myblog/skateboard/image%20({{item.id}}).jpg" mode="aspectFill" lazy-load='true' bindtap='previewImg' />
          </view>
        </block>

        <slot name="{{item.slotname}}"></slot>
      </scroll-view>
    </swiper-item>
  </swiper>
  <view>

  </view>

</view>